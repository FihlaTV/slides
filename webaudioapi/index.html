<!DOCTYPE html>
<html>
<head>
	<title>Web Audio API</title>
	<base target=”_blank” />
	<meta charset='utf-8'/>
	<script src='slides.js'></script>
</head>

<body style='display: none'>
	<style>
	span.orange {
		color		: orange;
	}
	span.larger {
		font-weight	: bolder;
		font-size	: 120%;
	}
	</style>
	<section class='slides layout-regular template-default'>

<!-- ****************************************************************************
		Talk Introduction
********************************************************************************* -->
	<article>
		<h1>
			<center>
			<span style="font-size: 120%; color: orange;">
				Web Audio API
			</span>
			</center>
			<br/>
		</h1>
		<h3 style="font-size: 120%">
			<center>
				Efficient low level audio api
			</center>
			<br>
		</h3>
		<p>
			Jerome Etienne
		</p>
	</article>
	<article>
		<h3>
			Who Am I
		</h3>
		<img style="float:right" src='jetienne-avatar.jpg' />
		<ul>
			<li>
				coder, speaker, trainer
			</li>
			<li>
				Proud member of Web-5 association
			</li>
			<li>
				Javascript, Node.js, WebGL and other HTML5 games stuff
			</li>
		</ul>
		<h4>Learning Three.js</h4>
		<ul>
			<li>
				Author of <a href="http://learningthreejs.com">learningthreejs</a> blog
			</li>
			<li>
				Lists of three.js tutorials or "WebGL for dummies"
			</li>
		</ul>
		<h4>Contacts</h4>
		<ul>
			<li>
				<a href='https://twitter.com/jerome_etienne'>@jerome_etienne</a> on twitter,
				<a href='http://github.com/jeromeetienne'>jeromeetienne</a> on github
			</li>
		</ul>
	</article>




<!-- ****************************************************************************
		presentation
********************************************************************************* -->
	<article>
		<h2>
			So how to play sound on the web ?
		</h2>
	</article>
	<article>
		<h3>
			old ways: plugins
		</h3>
		<ul>
			<li>
				quicktime or flash: but mostly flash
			</li>
			<li>
				Performance arent top
			</li>
			<li>
				no interoperability, issue with search indexing
			</li>
		</ul>
	</article>
	<article>
		<h3>
			recent ways: audio tag
		</h3>
		<ul>
			<li>
				quite basic: volume, play, stop
			</li>
			<li>
				but no fine tuning not possible
			</li>
			<li>
				lack of feature: no streamed input.
			</li>
		</ul>
	</article>
	<article>
		<h3>
			new ways: Web Audio API and mozilla API
		</h3>
		<h4>Web Audio API</h4>
		<ul>
			<li>
				some <a href="">spec</a> in progress
			</li>
			<li>
				Aimed at games. based on openAL
			</li>
		</ul>
		<h4>Mozilla Audio API</h4>
		<ul>
			<li>
				status unclear:
				<a href="https://wiki.mozilla.org/Audio_Data_API">Audio Data API</a> works
			</li>
			<li>
				Soon depreciated for <a href="https://dvcs.w3.org/hg/audio/raw-file/tip/streams/StreamProcessing.html">StreamProcessing</a>?
				Follow this <a href='https://bugzilla.mozilla.org/show_bug.cgi?id=664918'>bug</a>
			</li>
		</ul>
		<h4>Compatibility</h4>
		<ul>
			<li>
				still incompatible :(
			</li>
		</ul>
	</article>
<!-- ****************************************************************************
		Web Audio API
********************************************************************************* -->
	<article>
		<h2>
			so what about Web Audio API
		</h2>
	</article>
	<article>
		<h3>
			Web Audio API in a few word
		</h3>
		<ul>
			<li>Aimed for game</li>
			<li>Based on OpenAL</li>
		</ul>
		<h4>Availability</h4>
		<ul>
			<li>Webkit browser</li>
			<li>so Safari</li>
			<li>and Chrome with all its flavors</li>
		</ul>
	</article>
	<article>
		<h2>
			Sure but how to play a sound ?
		</h2>
	</article>
	<article>
		<h3>
			First, Init It!
		</h3>
		<h4>Feature Detection</h4>
		<ul>
			<li>Check it is available</li>
		</ul>
		<pre>
var hasWebkitAudio = typeof(webkitAudioContext) === "function";
</pre>
		<h4>Initialisation</h4>
		<ul>
			<li>a bit like a canvas 2D or WebGL context</li>
		</ul>
		<pre>
var context = new webkitAudioContext();
</pre>
	</article>
	<article>
		<h3>
			Load a sound to get a buffer
		</h3>
		<pre>
function loadSound(url, ctx, onSuccess, onError) {
    // init request
    var request = new XMLHttpRequest();
    request.open('GET', url, true);
    request.responseType = 'arraybuffer'; // <= here secret sauce!

    // function called once data is loaded
    request.onload = function(){
        // request.response === encoded... so decode it now
        ctx.decodeAudioData(request.response, function(buffer) {
            onSuccess && onSuccess(buffer);
	}, function(){
            onError && onError();
        });
    }

    request.send();	// Start the request
}</pre>
	</article>
	<article>
		<h3>
			Basic sound playing
		</h3>
		<ul>
			<li>Plain playing it. No fx whatsoever</li>
		</ul>
		<pre>
function playSound(ctx, buffer) {
    // create a 'bufferSource' node
    var source = ctx.createBufferSource();
    // setup the buffer
    source.buffer = buffer;
    // connect it to context destination
    source.connect(ctx.destination);
    // play immediatly
    source.noteOn(0);
}
</pre>
	</article>
	<article>
		<h3>
			Steps for Basic sound playing
		</h3>
		<ol>
			<li>Create a audio context</li>
			<ul>
				<li>new webkitAudioContext()</li>
			</ul>
			<li>Load the audio buffer</li>
			<ul>
				<li>request.responseType = 'arraybuffer';</li>
			</ul>
			<li>Connect a buffer source to the context destination</li>
			<ul>
				<li>src.connect(ctx.destination);</li>
			</ul>
			<li>Trigger a play</li>
			<ul>
				<li>source.noteOn(0);</li>
			</ul>
		</ol>
	</article>
	<article>
		<h2>
			Ok we got basic code...
			<br/>
			<br/>
			What about those nodes ?
		</h2>
	</article>
	<article>
		<h3>
			Nodes and Routing
		</h3>
		<h4>What is routing ?</h4>
		<ul>
			<li>audio processing is a chain of nodes</li>
			<li>nodes connected to each other act as "route for sound"</li>
			<li>Sound follows this route</li>
		</ul>
		<h4>Most basic route</h4>
		<img src="images/modular-routing1.png" width="50%"/>
	</article>
	<article>
		<h3>
			a More Complex Route :)
		</h3>
		<img src="images/modular-routing2.png" width="100%"/>
	</article>

	<article>
		<h3>
			Ressource
		</h3>
		<ul>
			<li><a href='http://www.slideshare.net/gawd/game-development-with-html5'>Game Development With HTML5</a></li>
			<li><a href='http://www.html5rocks.com/en/tutorials/#technology:multimedia'>html5 rocks multimedia</a></li>
		</ul>
		<h4>html5rocks</h4>
		<ul>
			<li><a href='http://www.html5rocks.com/en/tutorials/webaudio/intro'>Getting Started with Web Audio</a></li>
			<li><a href='http://www.html5rocks.com/en/tutorials/webaudio/positional_audio/'>position sound and webgl</a></li>
			<li><a href='http://www.html5rocks.com/en/tutorials/getusermedia/intro/'>Capturing audio and video in HTML5</a></li>
			<li><a href='http://www.html5rocks.com/en/tutorials/webaudio/games/'>Developing game and video in HTML5</a></li>
			<li><a href='http://www.html5rocks.com/en/tutorials/casestudies/technitone/'>Case Study: buiding technitone.com</a></li>
		</ul>
	</article>

	<article>
		<h2>
			Show, Dont tell!
		</h2>
	</article>
	<article>
		<h3>
			Doom: a new workout for geeks!
		</h3>
		<ul>
			<li>link to youtube video <a href=''>Here</a></li>
			<li>use augmented web gesture to detect the user punches</li>
			<li>each user punch hurt the doom monster</li>
			<li>here is the demo <a href='http://127.0.0.1:8000/plugins/augmentedjoystick/examples/demo.html'>demo</a></li>
		</ul>
	</article>
	<article>
		<h2>
			"Show me the code" - linus torwald
		</h2>
	</article>
	<article>
		<h3>
			Coding with augmented gesture
		</h3>
		<h4>Initialize it</h4>
		<pre>
var aGesture	= new tQuery.AugmentedGesture();
</pre>
		<h4>Add Debug View</h4>
		<pre>
// get debug texture
var texture	= aJoystick.texture();	
// put the debug texture on top on the screen
var domElement	= texture.image;
document.body.appendChild(domElement);
</pre>
	</article>
	<article>
		<h3>
			Get a Gesture out of Pointers
		</h3>
		<h4>Get Pointers Coords</h4>
		<pre>
aGesture.bind('update', function(pointerR, pointerL){
	console.log(pointerR, pointerL);
});
</pre>
		<h4>Recognize the Gestures</h4>
		<pre>
var gestureR	= new tQuery.GestureRecognition();
aGesture.bind('update', function(pointerR, pointerL){
	var eventR	= gestureR.update(pointerR.x, pointerR.y, canvasW, canvasH);
	// eventR === null if nothing recognize
	// eventR === 'punch' if a punch if recognize
});
</pre>
	</article>
	<article>
		<h3>
			Pack it with Doom Character
		</h3>
		<h4>Get MD2 character</h4>
		<pre>
var character	= new tQuery.RatamahattaMD2Character();
character.attach(world);
</pre>
		<h4>Action from Gestures</h4>
		<pre>
if( eventR === 'punch' ){
    character.animation('crdeath');   // make character move
    // play a sound
    tQuery.createSound().load('eatghost.mp3', function(sound){
        sound.play();
    });
    // change the weapon
    character.setWeapon(Math.floor(Math.random()*11 % 11));
}
</pre>
	</article>
	<article>
		<h2>
			Not bad, what is under the hood ?
		</h2>
	</article>
	<article>
		<h3>
			Augmented Web Gestures : Fact sheets
		</h3>
		<h4>All <span class='orange'>open</span> technology</h4>
		<h4>All inside your web browser. <span class='orange'>pure web</span></h4>
		<h4>Very <span class='orange'>efficient image processing</span></h4>
	</article>
	<article>
		<h3>
			Image Processing <span class='orange'>Requirements</span>
		</h3>
		<h4><span class='orange'>Fast</span></h4>
		<ul>
			<li>
				Thus you got time to do other things. Like a game
			</li>
		</ul>
		<h4><span class='orange'>Robust</span></h4>
		<ul>		
			<li>
				Thus it works even in harsh environement.
			</li>
		</ul>
		<h4><span class='orange'>Easy to setup</span></h4>
		<ul>		
			<li>
				Thus anybody can do it wihout prior knowledge.
			</li>
		</ul>
	</article>
<!-- ****************************************************************************
		Capability
********************************************************************************* -->
	<article>
		<h3>
			Comparison with alternatives
		</h3>
		<h4>Previous work</h4>
		<ul>
			<li>
				WII and kinect did good.
			</li>
			<li>
				but <span class='orange'>closed</span> technology
			</li>
			<li>
				specific <span class='orange'>installation required</span> (not webby)
			</li>
		</ul>
		<h4>Augmented Web Gesture</h4>
		<ul>
			<li>
				<span class='orange'>costs less</span> (dishes gloves/children toy)
			</li>
			<li>
				All <span class='orange'>open standards</span>
			</li>
			<li>
				All <span class='orange'>in browser</span> so no install
			</li>
		</ul>
	</article>
	<article>
		<h2>
			What are the capabilities ?
		</h2>
	</article>
	<article>
		<h3>
			Localize Two Hands
		</h3>
		<h4>two pointers</h4>
		<ul>
			<li>two hands == two pointers</li>
			<li>no click for now</li>
			<li>
				<a href="http://127.0.0.1:8000/plugins/augmentedjoystick/examples/">demo</a>. Look at the crosses
			</li>
		</ul>
		<h4>Props</h4>
		<ul>
			<li>2 simple elements quite distingishable</li>
			<li>Currently 2 kids toys. total cost 6euro</li>
			<li>successfull experimentation with dish gloves too</li>
		</ul>
	</article>
<!-- ****************************************************************************
		Application
********************************************************************************* -->
	<article>
		<h2>
			hmm what about a actual application ?
		</h2>
	</article>
	<article>
		<h3>
			Doom: a new workout for geeks!
		</h3>
		<ul>
			<li>link to youtube video <a href=''>Here</a></li>
			<li>use augmented web gesture to detect the user punches</li>
			<li>each user punch hurt the doom monster</li>
			<li>here is the demo <a href='http://127.0.0.1:8000/plugins/augmentedjoystick/examples/demo.html'>demo</a></li>
		</ul>
	</article>
<!-- ****************************************************************************
		Conclusion
********************************************************************************* -->
	<article>
		<h2>
			Seems promising... What's next ?
		</h2>
	</article>
	<article>
		<h3>
			Future works
		</h3>
		<h4>on Medical Apps</h4>
		<ul>
			<li>
				Navigation in 3D data. Scanner
			</li>
			<li>
				User are non specialist
			</li>
			<li>
				Sanatized UI: no contact, so no germ propagation.
			</li>
		</ul>
		<h4>on Game</h4>
		<ul>
			<li>
				tennis, golf, aerobic ?
				Doom will likely a lot of sport too :)
			</li>
			<li>
				good for elders or youngsters, as the wii did it
			</li>
		</ul>
		<h4>on other fields i dunno yet :)</h4>
	</article>
	<article>
		<h1>
			That's all folks.
		</h1>
		<h3>
			Question ?
		</h3>
		<p>
			Jerome Etienne
		</p>
	</article>
</body>
</html>
